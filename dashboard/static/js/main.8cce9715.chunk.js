(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e){e.exports={menu:{map:"Carte",visualize:"Graphiques",export:"Exporter donn\xe9es",users:"Gestion des Utilisateurs",logout:"Deconnecter"},common:{variable:"Variable",standard_variables:"Variables Standards",other_variables:"Autres Variables",period:"P\xe9riode",period_week:"Semaine derni\xe8re",period_month:"Mois dernier",period_custom:"S\xe9lectionner p\xe9riode",data_type:"Type de Donn\xe9es",aggregation:"Agr\xe9gation",aggregation_5min:"Pas d'agr\xe9gation",aggregation_hourly:"Horaire",aggregation_daily:"Journali\xe8re",aggregation_monthly:"Mensuelle",start_date:"Date d\xe9but",end_date:" Date fin",description:"Description",stations:"Stations",filter:"Filtre",filter_all:"Tout",filter_description:"par exemple, l'identifiant de la station ou le nom",station_id:"Identifiant de la Station",location_name:"Nom du site",country:"Pays",latitude:"Latitude",longitude:"Longitude",actions:"Action",action_edit:"Modifier",specify_variables:"Sp\xe9cifier les variables",choose_stations:"Choisissez des stations individuelles",only_selected:"Afficher s\xe9lectionn\xe9s",disabled:"D\xe9sactiv\xe9",enabled:"Actif",show_all:"montrer tout",specify_period:"Pr\xe9ciser la p\xe9riode",timezone:"Fuseau horaire",timezone_utc:"UTC (Coordinated Universal Time)",timezone_eat:"EAT (East Africa Time) UTC+03:00",type:"Type",type_meteo:"Meteo",type_hydro:"Hydro"},map:{settings_page_title:"Configuration de la carte",layer:"Couche ",layer_locations:"Emplacement des stations meteo",layer_locations_hydro:"Emplacement des stations hydro",layer_availability:"Disponibilit\xe9 des donn\xe9es",layer_pressuretrend:"Tendance de la pression",layer_30dayprecipitation:"Pr\xe9cipitations cumul\xe9es (30 jours)",layer_7daytempmin:"Temp\xe9rature minimale (7 jours)",layer_7daytempmax:"Temp\xe9rature maximale (7 jours)",update:"Mise \xe0 jour de la carte",no_data:"Pas de donn\xe9es",qc_missing:" (CQ manquant)",up_to:"jusqu'\xe0"},visualize:{settings_page_title:"Configurer le graphique",settings_block_title:"Param\xe8tres Graphiques",create_button:"Cr\xe9er un graphique",back_button:"Retour \xe0 la Configuration Graphique",show_page_title:"Graphique",loading_text:"Chargement des donn\xe9es graphique, patientez s'il vous pla\xeet."},export:{history_page_title:"Exporter des donn\xe9es",history_block_title:"Exporter historique",history_created_at:"Cr\xe9er \xe0",history_status:"Statut",history_download:"T\xe9l\xe9charger",settings_page_title:"Cr\xe9er une exportation",settings_block_title:"Param\xe8tres d'exportation",create_button:"Cr\xe9er une Exportation",variables:"Variables",no_exports:"Vous n'avez pas encore g\xe9n\xe9r\xe9 d'exportations de donn\xe9es.",click_here:"Cliquez ici",start_new:"pour commencer une nouvelle exportation"},user_management:{page_title:"Gestion des Utilisateurs",table_title:"Liste des Utilisateurs",table_username:"Nom Utilisateur",table_email:"Email",table_last_active:"Derni\xe8re activit\xe9",create_title:"Utilisateur",create_subtitle:"Cr\xe9er Utilisateur",edit_title:"Utilisateur",edit_subtitle:"Modifier utilisateur",general_block_title:"G\xe9n\xe9ral",user_name:"Nom",user_email:"Email",user_password:"Mot de passe",user_role:"R\xf4le",user_role_normal:"Utilisateur",user_role_admin:"Administrateur",access_block_title:"Acc\xe8s",access_variables_standard:"Standard",access_variables_specific:"Sp\xe9cifique",variables_block_title:"Variables"}}},117:function(e,t,a){e.exports=a(244)},201:function(e,t,a){e.exports=a.p+"static/media/0.73476783.jpg"},223:function(e,t,a){},233:function(e,t,a){},238:function(e,t,a){},242:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(26),i=a.n(l),r=a(3),c=a(253),o={fr:{translation:a(103)}};r.a.use(c.a).init({resources:o,lng:"fr",interpolation:{escapeValue:!1}});r.a;var m=a(257),u=a(249),d=a(248),h=a(1),p=a(6),b=a.n(p),g=function(){return s.a.createElement(h.o,{className:"main-navbar__search w-100 d-none d-md-flex d-lg-flex"},s.a.createElement(h.s,{seamless:!0,className:"ml-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,s.a.createElement("i",{className:"material-icons"},"search"))),s.a.createElement(h.q,{className:"navbar-search",placeholder:"Search for something..."})))},f=a(10),E=a(11),v=a(13),y=a(12),N=a(14),_=a(5),j=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={visible:!1},a.toggleNotifications=a.toggleNotifications.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"toggleNotifications",value:function(){this.setState({visible:!this.state.visible})}},{key:"render",value:function(){return s.a.createElement(h.w,{className:"border-right dropdown notifications"},s.a.createElement(h.x,{className:"nav-link-icon text-center",onClick:this.toggleNotifications},s.a.createElement("div",{className:"nav-link-icon__wrapper"},s.a.createElement("i",{className:"material-icons"},"\ue7f4"),s.a.createElement(h.b,{pill:!0,theme:"danger"},"2"))),s.a.createElement(h.h,{open:this.state.visible,className:"dropdown-menu dropdown-menu-small"},s.a.createElement(h.l,null,s.a.createElement("div",{className:"notification__icon-wrapper"},s.a.createElement("div",{className:"notification__icon"},s.a.createElement("i",{className:"material-icons"},"\ue6e1"))),s.a.createElement("div",{className:"notification__content"},s.a.createElement("span",{className:"notification__category"},"Analytics"),s.a.createElement("p",null,"Your website\u2019s active users count increased by"," ",s.a.createElement("span",{className:"text-success text-semibold"},"28%")," in the last week. Great job!"))),s.a.createElement(h.l,null,s.a.createElement("div",{className:"notification__icon-wrapper"},s.a.createElement("div",{className:"notification__icon"},s.a.createElement("i",{className:"material-icons"},"\ue8d1"))),s.a.createElement("div",{className:"notification__content"},s.a.createElement("span",{className:"notification__category"},"Sales"),s.a.createElement("p",null,"Last week your store\u2019s sales count decreased by"," ",s.a.createElement("span",{className:"text-danger text-semibold"},"5.52%"),". It could have been worse!"))),s.a.createElement(h.l,{className:"notification__all text-center"},"View all Notifications")))}}]),t}(s.a.Component),O=a(92),x=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={visible:!1},a.toggleUserActions=a.toggleUserActions.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"toggleUserActions",value:function(){this.setState({visible:!this.state.visible})}},{key:"render",value:function(){return s.a.createElement(h.w,{tag:h.k,caret:!0,toggle:this.toggleUserActions},s.a.createElement(h.n,{caret:!0,tag:h.x,className:"text-nowrap px-3"},s.a.createElement("img",{className:"user-avatar rounded-circle mr-2",src:a(201),alt:"User Avatar"})," ",s.a.createElement("span",{className:"d-none d-md-inline-block"},"Sierra Brooks")),s.a.createElement(h.h,{tag:h.m,right:!0,small:!0,open:this.state.visible},s.a.createElement(h.l,{tag:O.a,to:"profile"},s.a.createElement("i",{className:"material-icons"},"\ue7fd")," Profile"),s.a.createElement(h.l,{divider:!0}),s.a.createElement(h.l,{tag:O.a,to:"/logout",className:"text-danger"},s.a.createElement("i",{className:"material-icons text-danger"},"\ue879")," Logout")))}}]),t}(s.a.Component),C=function(){return s.a.createElement(h.v,{navbar:!0,className:"border-left flex-row"},s.a.createElement(j,null),s.a.createElement(x,null))},S="CHANGE",k="TOGGLE_SIDEBAR",D="CHECK_INIT",A="EVENT_STATIONS_READY",L="EVENT_VARIABLES_READY",w="EVENT_USER_READY",T=new(a(111).Dispatcher),V=a(112),M=a(22),z=a.n(M),U={menuVisible:!1,navItems:[{title:r.a.t("menu.map"),htmlBefore:'<i class="material-icons">vertical_split</i>',to:"/map"},{title:r.a.t("menu.visualize"),htmlBefore:'<i class="material-icons">insert_chart</i>',to:"/visualize"},{title:r.a.t("menu.export"),htmlBefore:'<i class="material-icons">cloud_download</i>',to:"/export"},{title:r.a.t("menu.users"),htmlBefore:'<i class="material-icons">account_box</i>',to:"/user-management",adminOnly:!0}],stations:[],variables:[],stationAccess:[],variableAccess:[],user:{},initInProgress:!1,initCompleted:!1,aggregation:{"1H":"Hourly","1D":"Daily","1M":"Monthly"}},I=new(function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(y.a)(t).call(this))).registerToActions=e.registerToActions.bind(Object(_.a)(Object(_.a)(e))),e.toggleSidebar=e.toggleSidebar.bind(Object(_.a)(Object(_.a)(e))),T.register(e.registerToActions.bind(Object(_.a)(Object(_.a)(e)))),e.init(),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"registerToActions",value:function(e){var t=e.actionType;e.payload;switch(t){case k:this.toggleSidebar();break;case D:this.checkInit()}}},{key:"toggleSidebar",value:function(){U.menuVisible=!U.menuVisible,this.emit(S)}},{key:"getMenuState",value:function(){return U.menuVisible}},{key:"getSidebarItems",value:function(){var e=U.navItems;return U.user.role&&"admin"===U.user.role||(e=e.filter(function(e){return!e.adminOnly})),e}},{key:"checkInit",value:function(){U.initCompleted?(this.emit(A),this.emit(L),this.emit(w)):U.initInProgress||this.init()}},{key:"init",value:function(){var e=this;U.initInProgress=!0,z.a.get("/init").then(function(e){return e.data}).then(function(t){U.stations=t.stations,U.stationAccess=t.stationAccess,e.emit(A),U.variables=t.variables,U.variableAccess=t.variableAccess,e.emit(L),U.user=t.user,e.emit(w),e.emit(S),U.initInProgress=!1,U.initCompleted=!0})}},{key:"getStations",value:function(){return U.stations}},{key:"getAccessStationCodes",value:function(){return U.stationAccess}},{key:"getVariables",value:function(){return U.variables}},{key:"getAccessVariableCodes",value:function(){return U.variableAccess}},{key:"getAggregations",value:function(){return U.aggregation}},{key:"getAccessAggregations",value:function(){return"access"in U.user&&"aggregation"in U.user.access?!0===U.user.access.aggregation.unlimited?Object.keys(U.aggregation):U.user.access.aggregation.specific:[]}},{key:"getUser",value:function(){return U.user}},{key:"addChangeListener",value:function(e){this.on(S,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(S,e)}}]),t}(V.EventEmitter)),G=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"handleClick",value:function(){T.dispatch({actionType:k})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"nav"},s.a.createElement("a",{href:"#",onClick:this.handleClick,className:"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-inline d-lg-none text-center"},s.a.createElement("i",{className:"material-icons"},"\ue5d2")))}}]),t}(s.a.Component),R=function(e){e.layout;var t=e.stickyTop,a=b()("main-navbar","bg-white",t&&"sticky-top");return s.a.createElement("div",{className:a},s.a.createElement(h.i,{className:"p-0"},s.a.createElement(h.y,{type:"light",className:"align-items-stretch flex-md-nowrap p-0"},s.a.createElement(g,null),s.a.createElement(C,null),s.a.createElement(G,null))))};R.defaultProps={stickyTop:!0};var P=R,B=a(15),q=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).handleToggleSidebar=a.handleToggleSidebar.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"handleToggleSidebar",value:function(){T.dispatch({actionType:k})}},{key:"render",value:function(){var e=this.props.hideLogoText;return s.a.createElement("div",{className:"main-navbar"},s.a.createElement(h.y,{className:"align-items-stretch bg-white flex-md-nowrap border-bottom p-0",type:"light"},s.a.createElement(h.z,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"}},s.a.createElement("div",{className:"d-table m-auto"},!e&&s.a.createElement("span",{className:"d-none d-md-inline ml-1"},"Meteo Madagascar Portail Web"))),s.a.createElement("a",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:this.handleToggleSidebar},s.a.createElement("i",{className:"material-icons"},"\ue5c4"))))}}]),t}(s.a.Component);q.defaultProps={hideLogoText:!1};var W=q,Y=function(){return s.a.createElement(h.o,{className:"main-sidebar__search w-100 border-right d-sm-flex d-md-none d-lg-none",style:{display:"flex",minHeight:"45px"}},s.a.createElement(h.s,{seamless:!0,className:"ml-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,s.a.createElement("i",{className:"material-icons"},"search")),s.a.createElement(h.q,{className:"navbar-search",placeholder:"Search for something...","aria-label":"Search"}))))},F=a(254),H=function(e){var t=e.item;return s.a.createElement(h.w,null,s.a.createElement(h.x,{tag:F.a,to:t.to},t.htmlBefore&&s.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlBefore}}),t.title&&s.a.createElement("span",null,t.title),t.htmlAfter&&s.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlAfter}})))},Z=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={navItems:I.getSidebarItems()},a.onChange=a.onChange.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){I.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){I.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){this.setState(Object(B.a)({},this.state,{navItems:I.getSidebarItems()}))}},{key:"render",value:function(){var e=this.state.navItems;return s.a.createElement("div",{className:"nav-wrapper"},s.a.createElement(h.v,{className:"nav--no-borders flex-column"},e.map(function(e,t){return s.a.createElement(H,{key:t,item:e})}),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link","aria-current":"page",href:"/logout"},s.a.createElement("div",{className:"d-inline-block item-icon-wrapper"},s.a.createElement("i",{className:"material-icons"},"exit_to_app")),s.a.createElement("span",null,r.a.t("menu.logout"))))))}}]),t}(s.a.Component),J=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={menuVisible:!1,sidebarNavItems:I.getSidebarItems()},a.onChange=a.onChange.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){I.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){I.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){this.setState(Object(B.a)({},this.state,{menuVisible:I.getMenuState(),sidebarNavItems:I.getSidebarItems()}))}},{key:"render",value:function(){var e=b()("main-sidebar","px-0","col-12",this.state.menuVisible&&"open");return s.a.createElement(h.g,{tag:"aside",className:e,lg:{size:2},md:{size:3}},s.a.createElement(W,{hideLogoText:this.props.hideLogoText}),s.a.createElement(Y,null),s.a.createElement(Z,null))}}]),t}(s.a.Component);J.defaultProps={hideLogoText:!1};var K=J,Q=function(e){var t=e.contained,a=e.menuItems,n=e.copyright;return s.a.createElement("footer",{className:"main-footer d-flex p-2 px-3 bg-white border-top"},s.a.createElement(h.i,{fluid:t},s.a.createElement(h.A,null,s.a.createElement(h.v,null,a.map(function(e,t){return s.a.createElement(h.w,{key:t},s.a.createElement(h.x,{tag:O.a,to:e.to},e.title))})),s.a.createElement("span",{className:"copyright ml-auto my-auto mr-2"},n))))};Q.defaultProps={contained:!1,copyright:"Copyright \xa9 2018 DesignRevision",menuItems:[{title:"Home",to:"#"},{title:"Services",to:"#"},{title:"About",to:"#"},{title:"Products",to:"#"},{title:"Blog",to:"#"}]};var X=Q,$=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).updateDemo=a.updateDemo.bind(Object(_.a)(Object(_.a)(a))),a.state={demo:!1},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){I.on(w,this.updateDemo)}},{key:"componentWillUnmount",value:function(){I.removeListener(w,this.updateDemo)}},{key:"updateDemo",value:function(){var e=I.getUser();this.setState({demo:e.demo})}},{key:"render",value:function(){return s.a.createElement("div",null,!0===this.state.demo&&s.a.createElement(h.i,{fluid:!0,className:"px-0 alert-message",style:{position:"relative",zIndex:999}},s.a.createElement(h.a,{className:"mb-0"},s.a.createElement("i",{className:"fa fa-info mx-2"})," Your account hasn't been configured yet, therefore you only have access to demo stations and limited datasets.")))}}]),t}(s.a.Component),ee=function(e){var t=e.children,a=e.noNavbar,n=e.noFooter;return s.a.createElement(h.i,{fluid:!0},s.a.createElement(h.A,null,s.a.createElement(K,null),s.a.createElement(h.g,{className:"main-content p-0",lg:{size:10,offset:2},md:{size:9,offset:3},sm:"12",tag:"main"},!a&&s.a.createElement(P,null),s.a.createElement($,null),t,!n&&s.a.createElement(X,null))))};ee.defaultProps={noNavbar:!0,noFooter:!0};var te=ee,ae=a(37),ne=a.n(ae),se=a(116),le=function(e){var t=e.title,a=e.subtitle,n=e.className,l=Object(se.a)(e,["title","subtitle","className"]),i=b()(n,"text-center","text-md-left","mb-sm-0");return s.a.createElement(h.g,Object.assign({xs:"12",sm:"4",className:i},l),s.a.createElement("span",{className:"text-uppercase page-subtitle"},a),s.a.createElement("h3",{className:"page-title"},t))},ie=(a(223),function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={startDate:e.startDate?e.startDate:void 0,endDate:e.endDate?e.endDate:void 0,minDate:e.minDate?e.minDate:void 0,maxDate:e.maxDate?e.maxDate:void 0},a.handleStartDateChange=a.handleStartDateChange.bind(Object(_.a)(Object(_.a)(a))),a.handleEndDateChange=a.handleEndDateChange.bind(Object(_.a)(Object(_.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"changeLimit",value:function(e,t){this.setState({minDate:e,maxDate:t})}},{key:"setDates",value:function(e,t){this.handleStartDateChange(e),this.handleEndDateChange(t)}},{key:"handleStartDateChange",value:function(e){this.setState(Object(B.a)({},this.state,{startDate:new Date(e)}))}},{key:"handleEndDateChange",value:function(e){this.setState(Object(B.a)({},this.state,{endDate:new Date(e)}))}},{key:"render",value:function(){var e=this.props.className,t=b()(e,"d-flex","my-auto","date-range");return s.a.createElement(h.s,{className:t},s.a.createElement(h.j,{size:"sm",dateFormat:"yyyy-MM-dd",selected:this.state.startDate,onChange:this.handleStartDateChange,minDate:this.state.minDate,maxDate:this.state.maxDate,placeholderText:"Start Date",dropdownMode:"select",className:"text-center"}),s.a.createElement(h.j,{size:"sm",dateFormat:"yyyy-MM-dd",selected:this.state.endDate,onChange:this.handleEndDateChange,minDate:this.state.minDate,maxDate:this.state.maxDate,placeholderText:"End Date",dropdownMode:"select",className:"text-center"}),s.a.createElement(h.t,{type:"append"},s.a.createElement(h.u,null,s.a.createElement("i",{className:"material-icons"},"\ue916"))))}}]),t}(s.a.Component)),re=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).dateRangeReference=s.a.createRef(),a.handleVariableChange=a.handleVariableChange.bind(Object(_.a)(Object(_.a)(a))),a.handleStationChange=a.handleStationChange.bind(Object(_.a)(Object(_.a)(a))),a.startExport=a.startExport.bind(Object(_.a)(Object(_.a)(a))),a.change=a.change.bind(Object(_.a)(Object(_.a)(a))),a.submit=a.submit.bind(Object(_.a)(Object(_.a)(a))),a.updateStations=a.updateStations.bind(Object(_.a)(Object(_.a)(a))),a.updateVariables=a.updateVariables.bind(Object(_.a)(Object(_.a)(a))),a.state={show:!1,startDate:"",endDate:"",variables:{},variableList:[],stations:{},stationList:[],filterString:"",description:"",multiSelect:!1,minDate:new Date("1990-01-01"),maxDate:new Date,timezone:"UTC",filterType:"meteo"},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"handleVariableChange",value:function(e,t){var a={variables:this.state.variables};a.variables[t]=!this.state.variables[t],this.setState(Object(B.a)({},this.state,a))}},{key:"handleStationChange",value:function(e,t){var a={stations:this.state.stations};a.stations[t]=!this.state.stations[t],this.setState(Object(B.a)({},this.state,a))}},{key:"handleMultiSelectChange",value:function(){var e=this,t=!this.state.multiSelect,a=this.state.stations;this.state.stationList.filter(function(t){return t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString)}).map(function(e){a[e.code]=t});var n={multiSelect:t,stations:a};this.setState(Object(B.a)({},this.state,n))}},{key:"change",value:function(e,t){var a={};a[e]=t,"filterString"==e&&(a.multiSelect=!1),this.setState(Object(B.a)({},this.state,a))}},{key:"startExport",value:function(e){this.setState(Object(B.a)({},this.state,{show:!0}))}},{key:"submit",value:function(){var e=this,t=[],a=this.dateRangeReference.current,n={variables:[],stations:[],startDate:null,endDate:null};(!a.state.startDate||!a.state.startDate instanceof Date)&&t.push("Invalid start date"),(!a.state.endDate||!a.state.endDate instanceof Date)&&t.push("Invalid end date");for(var s=0,l=Object.keys(this.state.stations);s<l.length;s++){var i=l[s];this.state.stations[i]&&n.stations.push(i)}for(var r=function(){var t=o[c];e.state.variables[t]&&e.state.variableList.find(function(e){return e.shortcode==t})&&n.variables.push(t)},c=0,o=Object.keys(this.state.variables);c<o.length;c++)r();if(0==n.stations.length&&t.push("There are no stations selected."),0==n.variables.length&&t.push("There are no variables selected."),t.length>0)return alert("Data export failed:\n"+t.join("\n")),!1;n.startDate=a.state.startDate.getFullYear()+"-"+("0"+(a.state.startDate.getMonth()+1)).slice(-2)+"-"+("0"+a.state.startDate.getDate()).slice(-2)+"T00:00:00.000Z",n.endDate=a.state.endDate.getFullYear()+"-"+("0"+(a.state.endDate.getMonth()+1)).slice(-2)+"-"+("0"+a.state.endDate.getDate()).slice(-2)+"T23:59:59.000Z",n.description=this.state.description,n.timezone=this.state.timezone,z()({url:"/export",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:n}).then(function(e){return e.data}).then(function(e){"success"===e.status?window.location.reload():alert("Data export failed:\n"+e.error)}).catch(function(e){alert("Data export failed.")})}},{key:"updateStations",value:function(){var e=I.getAccessStationCodes(),t=I.getStations().filter(function(t){return-1!==e.indexOf(t.code)});this.setState({stationList:t})}},{key:"updateVariables",value:function(){var e=I.getAccessVariableCodes(),t=I.getVariables().filter(function(t){return-1!==e.indexOf(t.shortcode)});this.setState({variableList:t})}},{key:"componentWillMount",value:function(){I.on(A,this.updateStations),I.on(L,this.updateVariables)}},{key:"componentWillUnmount",value:function(){I.removeListener(A,this.updateStations),I.removeListener(L,this.updateVariables)}},{key:"componentDidMount",value:function(){T.dispatch({actionType:D})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"export-create"},s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("export.settings_page_title"),subtitle:"",className:"text-sm-left"})),!this.state.show&&s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement("p",{onClick:this.startExport},s.a.createElement("a",{href:"#export-create"},r.a.t("export.click_here"))," ",r.a.t("export.start_new"),"."))),this.state.show&&s.a.createElement("div",null,s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("export.settings_block_title"))),s.a.createElement(h.e,{className:"pt-0"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("common.period")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(ie,{ref:this.dateRangeReference,minDate:this.state.minDate,maxDate:this.state.maxDate}))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("export.variables")),s.a.createElement(h.g,{sm:"4",md:"3",className:"mb-2 mt-2"},s.a.createElement("strong",{className:"text-muted d-block mb-2"},r.a.t("common.standard_variables")),s.a.createElement("fieldset",null,this.state.variableList.filter(function(e){return!0===e.standard}).map(function(t){return s.a.createElement(h.p,{checked:e.state.variables[t.shortcode],onChange:function(a){return e.handleVariableChange(a,t.shortcode)}},t.description)}))),this.state.variableList.filter(function(e){return!1===e.standard}).length>0&&s.a.createElement(h.g,{sm:"4",md:"3",className:"mb-2 mt-2"},s.a.createElement("strong",{className:"text-muted d-block mb-2"},r.a.t("common.other_variables")),s.a.createElement("fieldset",null,this.state.variableList.filter(function(e){return!1===e.standard}).map(function(t){return s.a.createElement(h.p,{checked:e.state.variables[t.shortcode],onChange:function(a){return e.handleVariableChange(a,t.shortcode)}},t.description)})))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("common.timezone")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,"TZ")),s.a.createElement(h.r,{onChange:function(t){return e.change("timezone",t.target.value)}},s.a.createElement("option",{selected:"UTC"==this.state.timezone?"selected":"",value:"UTC"},r.a.t("common.timezone_utc")),s.a.createElement("option",{selected:"Africa/Nairobi"==this.state.timezone?"selected":"",value:"Africa/Nairobi"},r.a.t("common.timezone_eat")))))),s.a.createElement(h.A,null,s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("common.description")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.q,{placeholder:"",onChange:function(t){return e.change("description",t.target.value)}}))))))),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-2"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("common.stations"))),s.a.createElement(h.e,{className:"p-0 pb-3"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3 ml-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.filter"))),s.a.createElement(h.q,{onChange:function(t){return e.change("filterString",t.target.value.toLowerCase())},placeholder:r.a.t("common.filter_description")}))),s.a.createElement(h.g,{sm:"2",className:"d-flex mb-2 mt-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.type"))),s.a.createElement(h.r,{onChange:function(t){return e.change("filterType",t.target.value)}},s.a.createElement("option",{value:"meteo"},r.a.t("common.type_meteo")),s.a.createElement("option",{value:"hydro"},r.a.t("common.type_hydro")))))),s.a.createElement("table",{className:"table mb-0"},s.a.createElement("thead",{className:"bg-light"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"border-0"},s.a.createElement(h.p,{className:"mb-0",checked:this.state.multiSelect,onChange:function(t){return e.handleMultiSelectChange(t)}})),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.station_id")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.location_name")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.latitude")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.longitude")))),s.a.createElement("tbody",null,this.state.stationList.filter(function(t){return(t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString))&&("meteo"===e.state.filterType&&t.meteo||"hydro"===e.state.filterType&&t.hydro)}).map(function(t){return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(h.p,{className:"mb-0",checked:e.state.stations[t.code],onChange:function(a){return e.handleStationChange(a,t.code)}})),s.a.createElement("td",null,t.code),s.a.createElement("td",null,t.location.name),s.a.createElement("td",null,t.location.latitude),s.a.createElement("td",null,t.location.longitude))}))))),s.a.createElement(h.c,{theme:"primary",onClick:this.submit,className:"mb-4 mr-1"},r.a.t("export.create_button"))))))}}]),t}(s.a.Component),ce=a(58),oe=a.n(ce),me=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).expandList=a.expandList.bind(Object(_.a)(Object(_.a)(a))),a.state={exportList:[],showNumber:5,expanded:!1},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.refreshList(!0),setInterval(this.refreshList.bind(this),1e4)}},{key:"refreshList",value:function(e){var t=this;(e||this.state.exportList.filter(function(e){return"completed"!==e.status}).length>0)&&z.a.get("/export").then(function(e){return e.data}).then(function(e){return t.setState({exportList:e.exports})})}},{key:"expandList",value:function(e){this.setState(Object(B.a)({},this.state,{expanded:!0,showNumber:100}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"export-history"},s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("export.history_page_title"),subtitle:"",className:"text-sm-left"})),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("export.history_block_title"),this.state.exportList.length>this.state.showNumber&&s.a.createElement("span",null,"\xa0-\xa0",s.a.createElement("a",{href:"#export-history",onClick:this.expandList},"(",r.a.t("common.show_all")," ",this.state.exportList.length,")")))),s.a.createElement(h.e,{className:"p-0 pb-3"},s.a.createElement("table",{className:"table mb-0"},s.a.createElement("thead",{className:"bg-light"},this.state.exportList.length>0&&s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("export.history_created_at")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.description")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("export.variables")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.stations")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("export.history_status")))),s.a.createElement("tbody",null,this.state.exportList.slice(0,this.state.showNumber).map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(oe.a,{date:e.createdAt,format:"YYYY-MM-DD HH:mm"})),s.a.createElement("td",null,e.description),s.a.createElement("td",null,e.variables.length<=3&&s.a.createElement("span",null,e.variables.join(", ")),e.variables.length>3&&s.a.createElement("span",null,e.variables.length," variables")),s.a.createElement("td",null,e.stations.length<=3&&s.a.createElement("span",null,e.stations.join(", ")),e.stations.length>3&&s.a.createElement("span",null,e.stations.length," stations")),"completed"===e.status&&s.a.createElement("td",null,s.a.createElement("a",{href:"/download/export/"+e._id},r.a.t("export.history_download"))),"completed"!==e.status&&s.a.createElement("td",null,e.status))}),0===this.state.exportList.length&&s.a.createElement("tr",null,s.a.createElement("td",{colspan:"5"},r.a.t("export.no_exports"))))))))))}}]),t}(s.a.Component),ue=function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container px-4"},s.a.createElement(me,null),s.a.createElement(re,null))},de=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).change=a.change.bind(Object(_.a)(Object(_.a)(a))),a.state={userList:[],demoList:[],filterUserType:""},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"change",value:function(e,t){var a={};a[e]=t,this.setState(Object(B.a)({},this.state,a))}},{key:"componentDidMount",value:function(){var e=this;z.a.get("/users").then(function(e){return e.data}).then(function(t){return e.setState({userList:t.users})})}},{key:"render",value:function(){return s.a.createElement("div",{id:"user-overview"},s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("user_management.page_title"),subtitle:"",className:"text-sm-left"})),s.a.createElement(O.a,{to:"/add-user"},s.a.createElement(h.c,{theme:"primary",className:"mb-4 mr-1"},r.a.t("user_management.create_subtitle"))),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("user_management.table_title")," (",this.state.userList.length,")")),s.a.createElement(h.e,{className:"p-0 pb-3"},s.a.createElement("table",{className:"table mb-0"},s.a.createElement("thead",{className:"bg-light"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("user_management.table_username")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("user_management.table_email")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("user_management.table_last_active")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.actions")))),s.a.createElement("tbody",null,this.state.userList.map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,e.profile.name,"admin"===e.role&&s.a.createElement("span",null,"\xa0",s.a.createElement("i",{className:"material-icons"},"grade"))),s.a.createElement("td",null,e.email),s.a.createElement("td",null,e.lastLogin&&s.a.createElement(oe.a,{date:e.lastLogin,format:"YYYY-MM-DD"})),s.a.createElement("td",null,s.a.createElement(O.a,{to:"/edit-user/"+e._id},r.a.t("common.action_edit"))))}))))))))}}]),t}(s.a.Component),he=function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container px-4"},s.a.createElement(de,null))},pe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).dateRangeReference=s.a.createRef(),a.handleVariableChange=a.handleVariableChange.bind(Object(_.a)(Object(_.a)(a))),a.handleStationChange=a.handleStationChange.bind(Object(_.a)(Object(_.a)(a))),a.change=a.change.bind(Object(_.a)(Object(_.a)(a))),a.submit=a.submit.bind(Object(_.a)(Object(_.a)(a))),a.updateStations=a.updateStations.bind(Object(_.a)(Object(_.a)(a))),a.updateVariables=a.updateVariables.bind(Object(_.a)(Object(_.a)(a))),a.state={submitLabel:r.a.t("user_management.create_subtitle"),redirect:!1,variables:{},variableList:[],stations:{},stationList:[],filterString:"",filterSelected:"disabled",description:"",multiSelect:!1,userId:null,user:null,name:"",password:"",email:"",role:"user",variableAccess:"standard",stationAccess:"unlimited"},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"change",value:function(e,t){var a={};a[e]=t,this.setState(Object(B.a)({},this.state,a))}},{key:"submit",value:function(){for(var e=this,t=[],a=[],n=0,s=Object.keys(this.state.stations);n<s.length;n++){var l=s[n];this.state.stations[l]&&t.push(l)}for(var i=0,r=Object.keys(this.state.variables);i<r.length;i++){var c=r[i];this.state.variables[c]&&a.push(c)}var o={stations:{unlimited:"unlimited"===this.state.stationAccess,specific:"stations"===this.state.stationAccess||"specific"===this.state.stationAccess?t:[]},variables:{unlimited:"unlimited"===this.state.variableAccess,standard:"standard"===this.state.variableAccess,specific:"specific"===this.state.variableAccess?a:[]}},m={name:this.state.name,email:this.state.email.trim(),password:this.state.password.trim(),role:this.state.role,access:o};z()({url:"/users"+(this.state.userId?"/"+this.state.userId:""),method:this.state.userId?"PUT":"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:m}).then(function(e){return e.data}).then(function(t){"success"===t.status?e.setState({redirect:!0}):alert("User create failed:\n"+t.error)}).catch(function(e){alert("User create failed.")})}},{key:"handleVariableChange",value:function(e,t){var a={variables:this.state.variables};a.variables[t]=!this.state.variables[t],this.setState(Object(B.a)({},this.state,a))}},{key:"handleStationChange",value:function(e,t){var a={stations:this.state.stations};a.stations[t]=!this.state.stations[t],this.setState(Object(B.a)({},this.state,a))}},{key:"handleMultiSelectChange",value:function(){var e=this,t=!this.state.multiSelect,a=this.state.stations;this.state.stationList.filter(function(t){return(t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString))&&("disabled"===e.state.filterSelected||e.state.stations[t.code])}).map(function(e){a[e.code]=t});var n={multiSelect:t,stations:a};this.setState(Object(B.a)({},this.state,n))}},{key:"componentDidMount",value:function(){var e=this;this.props.id&&(this.setState({userId:this.props.id,submitLabel:r.a.t("user_management.edit_subtitle")}),z.a.get("/users/"+this.props.id).then(function(e){return e.data}).then(function(t){if(t.user&&(e.setState({user:t.user,name:t.user.profile.name,email:t.user.email,role:t.user.role}),t.user.access)){var a=t.user.access;e.setState({variableAccess:a.variables.unlimited?"unlimited":a.variables.standard?"standard":"specific",stationAccess:a.stations.unlimited?"unlimited":"specific",variables:ne.a.zipObject(a.variables.specific,a.variables.specific.map(function(e){return!0})),stations:ne.a.zipObject(a.stations.specific,a.stations.specific.map(function(e){return!0}))})}})),T.dispatch({actionType:D})}},{key:"updateStations",value:function(){var e=I.getAccessStationCodes(),t=I.getStations().filter(function(t){return-1!==e.indexOf(t.code)});this.setState({stationList:t})}},{key:"updateVariables",value:function(){var e=I.getAccessVariableCodes(),t=I.getVariables().filter(function(t){return-1!==e.indexOf(t.shortcode)});this.setState({variableList:t})}},{key:"componentWillMount",value:function(){I.on(A,this.updateStations),I.on(L,this.updateVariables)}},{key:"componentWillUnmount",value:function(){I.removeListener(A,this.updateStations),I.removeListener(L,this.updateVariables)}},{key:"render",value:function(){var e=this;return!0===this.state.redirect?s.a.createElement(d.a,{to:"/user-management"}):s.a.createElement("div",{id:"user-overview"},s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("user_management.create_title"),subtitle:this.state.submitLabel,className:"text-sm-left"})),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("user_management.general_block_title"))),s.a.createElement(h.e,{className:"pt-0"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("user_management.user_name")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.q,{placeholder:"",value:this.state.name,onChange:function(t){return e.change("name",t.target.value)}}))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("user_management.user_email")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.q,{placeholder:"",value:this.state.email,onChange:function(t){return e.change("email",t.target.value)}}))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("user_management.user_password")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.q,{placeholder:"",value:this.state.password,onChange:function(t){return e.change("password",t.target.value)}}))),s.a.createElement(h.A,null,s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("user_management.user_role")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.r,{value:this.state.role,onChange:function(t){return e.change("role",t.target.value)}},s.a.createElement("option",{value:"user"},r.a.t("user_management.user_role_normal")),s.a.createElement("option",{value:"admin"},r.a.t("user_management.user_role_admin")))))))))),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("user_management.access_block_title"))),s.a.createElement(h.e,{className:"pt-0"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("user_management.variables_block_title")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.r,{value:this.state.variableAccess,onChange:function(t){return e.change("variableAccess",t.target.value)}},s.a.createElement("option",{value:"unlimited"},r.a.t("common.filter_all")),s.a.createElement("option",{value:"standard"},r.a.t("user_management.access_variables_standard")),s.a.createElement("option",{value:"specific"},r.a.t("user_management.access_variables_specific")))))),"specific"===this.state.variableAccess&&s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("common.specify_variables")),s.a.createElement(h.g,{sm:"4",md:"3",className:"mb-2 mt-2"},s.a.createElement("strong",{className:"text-muted d-block mb-2"},r.a.t("common.standard_variables")),s.a.createElement("fieldset",null,this.state.variableList.filter(function(e){return!0===e.standard}).map(function(t){return s.a.createElement(h.p,{checked:e.state.variables[t.shortcode],onChange:function(a){return e.handleVariableChange(a,t.shortcode)}},t.description)}))),this.state.variableList.filter(function(e){return!1===e.standard}).length>0&&s.a.createElement(h.g,{sm:"4",md:"3",className:"mb-2 mt-2"},s.a.createElement("strong",{className:"text-muted d-block mb-2"},r.a.t("common.other_variables")),s.a.createElement("fieldset",null,this.state.variableList.filter(function(e){return!1===e.standard}).map(function(t){return s.a.createElement(h.p,{checked:e.state.variables[t.shortcode],onChange:function(a){return e.handleVariableChange(a,t.shortcode)}},t.description)})))),s.a.createElement(h.A,null,s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("common.stations")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.r,{value:this.state.stationAccess,onChange:function(t){return e.change("stationAccess",t.target.value)}},s.a.createElement("option",{value:"unlimited"},r.a.t("common.filter_all")),s.a.createElement("option",{value:"specific"},r.a.t("common.choose_stations")))))))))),("stations"===this.state.stationAccess||"specific"===this.state.stationAccess)&&s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-2"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("common.choose_stations"))),s.a.createElement(h.e,{className:"p-0 pb-3"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3 ml-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.filter"))),s.a.createElement(h.q,{onChange:function(t){return e.change("filterString",t.target.value.toLowerCase())},placeholder:r.a.t("common.filter_description")}))),s.a.createElement(h.g,{sm:"2",className:"d-flex mb-2 mt-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.only_selected"))),s.a.createElement(h.r,{onChange:function(t){return e.change("filterSelected",t.target.value)}},s.a.createElement("option",{value:"disabled"},r.a.t("common.disabled")),s.a.createElement("option",{value:"enabled"},r.a.t("common.enabled")))))),s.a.createElement("table",{className:"table mb-0"},s.a.createElement("thead",{className:"bg-light"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"border-0"},s.a.createElement(h.p,{className:"mb-0",checked:this.state.multiSelect,onChange:function(t){return e.handleMultiSelectChange(t)}})),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.station_id")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.location_name")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.latitude")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.longitude")))),s.a.createElement("tbody",null,this.state.stationList.filter(function(t){return(t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString))&&("disabled"===e.state.filterSelected||e.state.stations[t.code])}).map(function(t){return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(h.p,{className:"mb-0",checked:e.state.stations[t.code],onChange:function(a){return e.handleStationChange(a,t.code)}})),s.a.createElement("td",null,t.code),s.a.createElement("td",null,t.location.name),s.a.createElement("td",null,t.location.latitude),s.a.createElement("td",null,t.location.longitude))}))))))),s.a.createElement(h.c,{theme:"primary",onClick:this.submit,className:"mb-4 mr-1"},this.state.submitLabel))}}]),t}(s.a.Component),be=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container px-4"},s.a.createElement(pe,null))}}]),t}(s.a.Component),ge=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={userId:e.match.params.id},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container px-4"},s.a.createElement(pe,{id:this.state.userId}))}}]),t}(s.a.Component),fe=a(256),Ee=a(259),ve=a(255),ye=a(258),Ne=(a(226),a(20)),_e=a.n(Ne),je=a(79);delete _e.a.Icon.Default.prototype._getIconUrl,_e.a.Icon.Default.mergeOptions({iconRetinaUrl:a(228),iconUrl:a(229),shadowUrl:a(230)});var Oe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).submit=a.submit.bind(Object(_.a)(Object(_.a)(a))),a.updateStations=a.updateStations.bind(Object(_.a)(Object(_.a)(a))),a.updateVariables=a.updateVariables.bind(Object(_.a)(Object(_.a)(a))),a.changeType=a.changeType.bind(Object(_.a)(Object(_.a)(a))),a.state={bounds:[[-11.710923,41.137109],[-26.2891802,52.3832053]],stationList:[],variableList:[],valueList:{},detailsList:{},colorList:{},type:"",activeType:"",activeUnit:"",valueActive:!1,detailsActive:!1},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"updateStations",value:function(){var e=I.getStations();this.setState({stationList:e})}},{key:"updateVariables",value:function(){var e=I.getAccessVariableCodes(),t=I.getVariables().filter(function(t){return-1!==e.indexOf(t.shortcode)});this.setState({variableList:t})}},{key:"changeType",value:function(e){var t={};t.type=e,this.setState(t)}},{key:"componentWillMount",value:function(){I.on(A,this.updateStations),I.on(L,this.updateVariables)}},{key:"componentWillUnmount",value:function(){I.removeListener(A,this.updateStations),I.removeListener(L,this.updateVariables)}},{key:"componentDidMount",value:function(){T.dispatch({actionType:D})}},{key:"submit",value:function(){var e=this,t=[],a={type:this.state.type};if(""===a.type||"hydro"===a.type)this.setState({activeType:a.type,valueActive:!1,detailsActive:!1});else{if(t.length>0)return alert("Map update failed:\n"+t.join("\n")),!1;z()({url:"/map",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:a}).then(function(e){return e.data}).then(function(t){t.error?alert("Creating map failed:\n"+t.error):(e.setState({valueList:t,valueActive:!0}),e.setState({activeType:t.type,activeUnit:t.variable?e.state.variableList.find(function(e){return e.shortcode==t.variable}).units:"",colorList:t.colors,valueList:t.values,detailsList:t.details,valueActive:t.valueActive,detailsActive:t.detailsActive}))}).catch(function(e){alert("Creating map failed.")})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:"24px"}},s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("map.settings_page_title"),subtitle:"",className:"text-sm-left"})),s.a.createElement(h.A,{noGutters:!0},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("map.layer"))),s.a.createElement(h.r,{onChange:function(t){return e.changeType(t.target.value)}},s.a.createElement("option",{value:""},r.a.t("map.layer_locations")),s.a.createElement("option",{value:"hydro"},r.a.t("map.layer_locations_hydro")),s.a.createElement("option",{value:"availability"},r.a.t("map.layer_availability")),s.a.createElement("option",{value:"pressuretrend"},r.a.t("map.layer_pressuretrend")),s.a.createElement("option",{value:"30dayprecipitation"},r.a.t("map.layer_30dayprecipitation")),s.a.createElement("option",{value:"7daytempmin"},r.a.t("map.layer_7daytempmin")),s.a.createElement("option",{value:"7daytempmax"},r.a.t("map.layer_7daytempmax"))))),s.a.createElement(h.g,{sm:"3",className:"d-flex ml-2"},s.a.createElement(h.c,{theme:"primary",onClick:this.submit,className:"mt-2 mb-2 mr-1"},r.a.t("map.update"))))),s.a.createElement(fe.a,{bounds:this.state.bounds,style:{height:"calc(100vh - 126px)"},maxZoom:12},s.a.createElement(Ee.a,{attribution:'Tiles \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),!this.state.valueActive&&!this.state.detailsActive&&this.state.stationList.map(function(t){if(!e.state.activeType&&t.meteo||"hydro"===e.state.activeType&&t.hydro)return s.a.createElement(ve.a,{position:[t.location.latitude,t.location.longitude]},s.a.createElement(ye.a,null,s.a.createElement("p",null,"".concat(t.code," ").concat(t.location.name),s.a.createElement("br",null),"Latitude: ".concat(t.location.latitude,", Longitude: ").concat(t.location.longitude))))}),this.state.detailsActive&&this.state.stationList.map(function(t){if(t.meteo){var a="",n=e.state.colorList[t.code]?e.state.colorList[t.code]:"lightgray";return a=e.state.detailsList[t.code]?"".concat(e.state.detailsList[t.code].min.substring(0,10).split("-").reverse().join("-")," ").concat(r.a.t("map.up_to")," ").concat(e.state.detailsList[t.code].max.substring(0,10).split("-").reverse().join("-")):r.a.t("map.no_data"),e.state.detailsList[t.code]&&!e.state.detailsList[t.code].qc&&(a+=r.a.t("map.qc_missing")),s.a.createElement(je.a,{center:[t.location.latitude,t.location.longitude],fillColor:n,color:"black",weight:1,fillOpacity:1,radius:6},s.a.createElement(ye.a,null,s.a.createElement("p",null,"".concat(t.code," ").concat(t.location.name),s.a.createElement("br",null),"".concat(a),s.a.createElement("br",null)),e.state.detailsList[t.code]&&Object.keys(e.state.detailsList[t.code].variables).map(function(a){var n=e.state.variableList.find(function(e){return e.shortcode==a});if(n)return s.a.createElement("p",null,n.description,": ",e.state.detailsList[t.code].variables[a].min.substring(0,10).split("-").reverse().join("-")," ",r.a.t("map.up_to")," ",e.state.detailsList[t.code].variables[a].max.substring(0,10).split("-").reverse().join("-"))})))}}),this.state.valueActive&&this.state.stationList.filter(function(t){return void 0!==e.state.valueList[t.code]}).map(function(t){var a=e.state.valueList[t.code],n=(100-Math.min(100,a/3)).toFixed(0),l="\thsl(240, 60%, ".concat(n,"%)");if("pressuretrend"==e.state.activeType)n=(100-Math.min(100,20*Math.abs(a))).toFixed(0),l=a<0?"\thsl(0, 90%, ".concat(n,"%)"):"\thsl(240, 60%, ".concat(n,"%)");else if("7daytempmin"==e.state.activeType||"7daytempmax"==e.state.activeType){var i="7daytempmin"==e.state.activeType?3*(a-10):3*(a-20);n=(100-Math.min(100,i)).toFixed(0),l="\thsl(0, 90%, ".concat(n,"%)")}return s.a.createElement(je.a,{center:[t.location.latitude,t.location.longitude],fillColor:l,color:"black",weight:1,fillOpacity:1,radius:6},s.a.createElement(ye.a,null,s.a.createElement("span",null,"".concat(t.code," ").concat(t.location.name,": ").concat(a.toFixed(1)," ").concat(e.state.activeUnit))))})))}}]),t}(s.a.Component),xe=(a(233),function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container no-padding"},s.a.createElement(Oe,null))}),Ce=a(115),Se=a.n(Ce),ke=function(e){function t(e){var a;Object(f.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).dateRangeReference=s.a.createRef(),a.handleStationChange=a.handleStationChange.bind(Object(_.a)(Object(_.a)(a))),a.handleMultiSelectChange=a.handleMultiSelectChange.bind(Object(_.a)(Object(_.a)(a))),a.change=a.change.bind(Object(_.a)(Object(_.a)(a))),a.changeVariable=a.changeVariable.bind(Object(_.a)(Object(_.a)(a))),a.submit=a.submit.bind(Object(_.a)(Object(_.a)(a))),a.hideGraph=a.hideGraph.bind(Object(_.a)(Object(_.a)(a))),a.updateStations=a.updateStations.bind(Object(_.a)(Object(_.a)(a))),a.updateVariables=a.updateVariables.bind(Object(_.a)(Object(_.a)(a))),a.updateAccess=a.updateAccess.bind(Object(_.a)(Object(_.a)(a)));return a.state={startDate:"",endDate:"",aggregation:null,variable:"ap",period:"week",type:"line",variableList:[],hideVariables:["wd","wg"],stations:{},stationList:[],filterString:"",aggregations:I.getAggregations(),aggregationAccess:[],graphTypeLabels:{"hourly-line":"Line graph","daily-line":"Line graph (daily values)","hourly-bar":"Bar graph (hourly values)","daily-bar":"Bar graph (daily values)",windrose:"Wind rose"},multiSelect:!1,availableGraphTypesByVariable:{default:["hourly-line"]},minDate:new Date("1970-01-01"),maxDate:new Date,showGraph:!1,graphData:[],graphTitle:"",graphUnits:"",graphType:"scatter",timezone:"Africa/Nairobi",filterType:"meteo"},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"change",value:function(e,t){var a={};a[e]=t,"filterString"==e&&(a.multiSelect=!1),this.setState(a)}},{key:"changeVariable",value:function(e){var t={};t.variable=e,t.type=this.state.availableGraphTypesByVariable[e]?this.state.availableGraphTypesByVariable[e][0]:this.state.availableGraphTypesByVariable.default[0],this.setState(t)}},{key:"handleStationChange",value:function(e,t){var a={stations:this.state.stations};a.stations[t]=!this.state.stations[t],this.setState(a)}},{key:"handleMultiSelectChange",value:function(){var e=this,t=!this.state.multiSelect,a=this.state.stations;this.state.stationList.filter(function(t){return t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString)}).map(function(e){a[e.code]=t});var n={multiSelect:t,stations:a};this.setState(Object(B.a)({},this.state,n))}},{key:"submit",value:function(){var e=this,t=[],a=this.dateRangeReference.current,n={variable:this.state.variable,type:this.state.type,stations:[],period:this.state.period,startDate:null,endDate:null,aggregation:{"hourly-bar":"1h","daily-bar":"1d","hourly-line":"1h","daily-line":"1d"}[this.state.type],timezone:this.state.timezone};"custom"===n.period&&(!a.state.startDate||!a.state.startDate instanceof Date)&&t.push("Invalid start date"),"custom"===n.period&&(!a.state.endDate||!a.state.endDate instanceof Date)&&t.push("Invalid end date");for(var s=0,l=Object.keys(this.state.stations);s<l.length;s++){var i=l[s];this.state.stations[i]&&n.stations.push(i)}if(0==n.stations.length&&t.push("There are no stations selected."),t.length>0)return alert("Graph plotting failed:\n"+t.join("\n")),!1;"custom"===n.period&&(n.startDate=a.state.startDate.getFullYear()+"-"+("0"+(a.state.startDate.getMonth()+1)).slice(-2)+"-"+("0"+a.state.startDate.getDate()).slice(-2)+"T00:00:00.000Z",n.endDate=a.state.endDate.getFullYear()+"-"+("0"+(a.state.endDate.getMonth()+1)).slice(-2)+"-"+("0"+a.state.endDate.getDate()).slice(-2)+"T23:59:59.000Z",this.setState({startDate:a.state.startDate,endDate:a.state.endDate})),this.showGraph(),z()({url:"/graph",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:n}).then(function(e){return e.data}).then(function(t){if(Array.isArray(t)){var a=e.state.variableList.find(function(t){return t.shortcode==e.state.variable}).description,n=e.state.variableList.find(function(t){return t.shortcode==e.state.variable}).units,s="scatter";"windrose"===e.state.type||"bar"===e.state.type.slice(-3)&&(s="bar");var l=t.map(function(e){return{x:e.timestamps,y:e.values,type:s,mode:"lines",name:e.station}});e.setState({graphData:l,graphType:s,graphTitle:a,graphUnits:n})}else e.hideGraph(),alert("Creating graph failed:\n"+t.error)}).catch(function(e){alert("Creating graph failed.")})}},{key:"showGraph",value:function(){this.setState({showGraph:!0})}},{key:"hideGraph",value:function(){this.setState({showGraph:!1,graphData:[]})}},{key:"updateStations",value:function(){var e=I.getAccessStationCodes(),t=I.getStations().filter(function(t){return-1!==e.indexOf(t.code)});this.setState({stationList:t})}},{key:"updateVariables",value:function(){var e=I.getAccessVariableCodes(),t=I.getVariables().filter(function(t){return-1!==e.indexOf(t.shortcode)});this.setState({variableList:t}),t.length&&t[0].shortcode&&this.changeVariable(t[0].shortcode)}},{key:"updateAccess",value:function(){var e=I.getUser();ne.a.has(e,"access.period.unlimited")&&!0!==e.access.period.unlimited&&(this.setState({minDate:new Date(e.access.period.startDate),maxDate:new Date>new Date(e.access.period.endDate)?new Date(e.access.period.endDate):new Date}),this.dateRangeReference.current&&this.dateRangeReference.current.changeLimit(this.state.minDate,this.state.maxDate))}},{key:"componentWillMount",value:function(){I.on(A,this.updateStations),I.on(L,this.updateVariables),I.on(w,this.updateAccess)}},{key:"componentWillUnmount",value:function(){I.removeListener(A,this.updateStations),I.removeListener(L,this.updateVariables),I.removeListener(w,this.updateAccess)}},{key:"componentDidMount",value:function(){T.dispatch({actionType:D})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"graph"},!1===this.state.showGraph&&s.a.createElement("div",null,s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("visualize.settings_page_title"),subtitle:"",className:"text-sm-left"})),s.a.createElement("div",null,s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-4"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("visualize.settings_block_title"))),s.a.createElement(h.e,{className:"pt-0"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},"Variable"),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.variable"))),s.a.createElement(h.r,{onChange:function(t){return e.changeVariable(t.target.value)}},this.state.variableList.filter(function(t){return-1===e.state.hideVariables.indexOf(t.shortcode)}).map(function(t){return s.a.createElement("option",{selected:e.state.variable==t.shortcode?"selected":"",value:t.shortcode},t.description)}))))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("visualize.show_page_title")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,"Type")),s.a.createElement(h.r,{onChange:function(t){return e.change("type",t.target.value)}},(this.state.availableGraphTypesByVariable[this.state.variable]?this.state.availableGraphTypesByVariable[this.state.variable]:this.state.availableGraphTypesByVariable.default).map(function(t){return s.a.createElement("option",{selected:e.state.type==t?"selected":"",value:t},e.state.graphTypeLabels[t])}))))),s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("common.timezone")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,"TZ")),s.a.createElement(h.r,{onChange:function(t){return e.change("timezone",t.target.value)}},s.a.createElement("option",{selected:"UTC"==this.state.timezone?"selected":"",value:"UTC"},r.a.t("common.timezone_utc")),s.a.createElement("option",{selected:"Africa/Nairobi"==this.state.timezone?"selected":"",value:"Africa/Nairobi"},r.a.t("common.timezone_eat")))))),s.a.createElement(h.A,{className:"".concat("custom"===this.state.period?"border-bottom":"")},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3"},r.a.t("common.period")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(h.s,null,s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.period"))),s.a.createElement(h.r,{onChange:function(t){return e.change("period",t.target.value)}},s.a.createElement("option",{selected:"week"==this.state.period?"selected":"",value:"week"},r.a.t("common.period_week")),s.a.createElement("option",{selected:"month"==this.state.period?"selected":"",value:"month"},r.a.t("common.period_month")),s.a.createElement("option",{selected:"custom"==this.state.period?"selected":"",value:"custom"},r.a.t("common.period_custom")))))),"custom"===this.state.period&&s.a.createElement(h.A,null,s.a.createElement(h.g,{sm:"3",className:"d-flex mb-3 mt-3"},r.a.t("common.specify_period")),s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-2"},s.a.createElement(ie,{startDate:this.state.startDate,endDate:this.state.endDate,ref:this.dateRangeReference,minDate:this.state.minDate,maxDate:this.state.maxDate}))))))),s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.d,{small:!0,className:"mb-2 scroll-500"},s.a.createElement(h.f,{className:"border-bottom"},s.a.createElement("h6",{className:"m-0"},r.a.t("common.stations"))),s.a.createElement(h.e,{className:"p-0 pb-3"},s.a.createElement(h.A,{className:"border-bottom"},s.a.createElement(h.g,{sm:"3",className:"d-flex mb-2 mt-3 ml-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.filter"))),s.a.createElement(h.q,{onChange:function(t){return e.change("filterString",t.target.value.toLowerCase())},placeholder:r.a.t("common.filter_description")}))),s.a.createElement(h.g,{sm:"2",className:"d-flex mb-2 mt-3"},s.a.createElement(h.s,{className:"mb-3"},s.a.createElement(h.t,{type:"prepend"},s.a.createElement(h.u,null,r.a.t("common.type"))),s.a.createElement(h.r,{onChange:function(t){return e.change("filterType",t.target.value)}},s.a.createElement("option",{value:"meteo"},r.a.t("common.type_meteo")),s.a.createElement("option",{value:"hydro"},r.a.t("common.type_hydro")))))),s.a.createElement("table",{className:"table mb-0"},s.a.createElement("thead",{className:"bg-light"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"border-0"},s.a.createElement(h.p,{className:"mb-0",checked:this.state.multiSelect,onChange:function(t){return e.handleMultiSelectChange(t)}})),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.station_id")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.location_name")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.latitude")),s.a.createElement("th",{scope:"col",className:"border-0"},r.a.t("common.longitude")))),s.a.createElement("tbody",null,this.state.stationList.filter(function(t){return(t.location.name.toLowerCase().includes(e.state.filterString)||t.code.toLowerCase().includes(e.state.filterString))&&("meteo"===e.state.filterType&&t.meteo||"hydro"===e.state.filterType&&t.hydro)}).map(function(t){return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(h.p,{className:"mb-0",checked:e.state.stations[t.code],onChange:function(a){return e.handleStationChange(a,t.code)}})),s.a.createElement("td",null,t.code),s.a.createElement("td",null,t.location.name),s.a.createElement("td",null,t.location.latitude),s.a.createElement("td",null,t.location.longitude))}))))),s.a.createElement(h.c,{theme:"primary",onClick:this.submit,className:"mb-4 mr-1"},r.a.t("visualize.create_button")))))),!0===this.state.showGraph&&s.a.createElement("div",null,s.a.createElement(h.A,{noGutters:!0,className:"page-header py-4"},s.a.createElement(le,{sm:"4",title:r.a.t("visualize.show_page_title"),subtitle:"",className:"text-sm-left"})),s.a.createElement(h.A,null,s.a.createElement(h.g,null,this.state.graphData.length>0&&s.a.createElement(Se.a,{data:this.state.graphData,layout:{title:this.state.graphTitle,showlegend:!0,yaxis:{title:{text:this.state.graphUnits}},barmode:"bar"===this.state.graphType?"group":void 0},config:{displayModeBar:!0,modeBarButtonsToRemove:["pan2d","select2d","lasso2d","resetScale2d","zoomIn2d","zoomOut2d","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"],displaylogo:!1}}),0===this.state.graphData.length&&s.a.createElement("p",null,r.a.t("visualize.loading_text")))),this.state.graphData.length>0&&s.a.createElement(h.A,null,s.a.createElement(h.g,null,s.a.createElement(h.c,{theme:"primary",onClick:this.hideGraph,className:"mt-2 mb-2 mr-1"},r.a.t("visualize.back_button"))))))}}]),t}(s.a.Component),De=(a(238),[{path:"/",exact:!0,layout:te,component:function(){return s.a.createElement(d.a,{to:"/map"})}},{path:"/map",layout:te,component:xe},{path:"/visualize",layout:te,component:function(){return s.a.createElement(h.i,{fluid:!0,className:"main-content-container px-4"},s.a.createElement(ke,null))}},{path:"/export",layout:te,component:ue},{path:"/user-management",layout:te,component:he},{path:"/add-user",layout:te,component:be},{path:"/edit-user/:id",layout:te,component:ge}]),Ae=a(65);Ae.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"/portal",REACT_APP_BASENAME:"/portal"}).REACT_APP_GAID||"UA-115105611-X");var Le=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t){function a(){return Object(f.a)(this,a),Object(v.a)(this,Object(y.a)(a).apply(this,arguments))}return Object(N.a)(a,t),Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname+this.props.location.search;"".concat("/portal").concat(e)}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname+e.location.search,a=this.props.location.pathname+this.props.location.search;t!==a&&"".concat("/portal").concat(a)}},{key:"render",value:function(){return s.a.createElement(e,this.props)}}]),a}(n.Component)};a(240),a(242),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(function(){return s.a.createElement(m.a,{basename:"/portal"},s.a.createElement("div",null,De.map(function(e,t){return s.a.createElement(u.a,{key:t,path:e.path,exact:e.exact,component:Le(function(t){return s.a.createElement(e.layout,t,s.a.createElement(e.component,t))})})})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[117,2,1]]]);
//# sourceMappingURL=main.8cce9715.chunk.js.map